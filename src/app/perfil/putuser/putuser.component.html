<FlexboxLayout class="page">
    <StackLayout class="form">
        <PreviousNextView>
            <ScrollView scrollBarIndicatorVisible="false" class="form scrolview m-t-30" orientation="vertical">
                <GridLayout rows="auto, *">
                    <Label text="&#xf060;" style="font-size: 25em" class="fas m-t-16" row="0" clearHistory="true" [nsRouterLink]="['/home']" pageTransition="slideRight"></Label>
                    <Image width="150" class="logo" row="0"  src="~/imagens/logo.png"></Image>
                    <Label [text]="Editar" row="0" (tap)="edit()" class="alter-user m-t-30"></Label>
                    <Label row="1" *ngIf="!reload" (tap)="start()" text="&#xf021;" class="fas reload"></Label>
                    <Label *ngIf="!reload" class="reload-text" text="Não foi possivel buscar os dados! Tente Novamente." row="1" ></Label>
                    <GridLayout row="1" *ngIf="reload" rows="auto, auto, auto, auto, auto, auto, auto, auto, auto, auto">




                        <StackLayout row="1" colSpan="3" class="input-field m-t-90">
                            <TextField #email keyboardType="email" class="input" hint="Email" [(ngModel)]="user.email"
                                       [isEnabled]="alterStatus"
                            ></TextField>
                            <StackLayout [class]="formUserValidator !== undefined && formUserValidator.email !== undefined ? 'hr-light linha-error' : 'hr-light'"></StackLayout>
                            <Label *ngIf="formUserValidator !== undefined && formUserValidator.email !== undefined" [text]="formUserValidator.email[0]" class="label-error"></Label>
                        </StackLayout>

<!--                        <StackLayout row="2" colSpan="3" class="input-field">-->
<!--                            <TextField #password class="input" [isEnabled]="alterStatus"-->
<!--                                       hint="Senha" secure="true" formControlName="password"></TextField>-->
<!--                            <StackLayout [class]="formUserValidator !== undefined && formUserValidator.password !== undefined ? 'hr-light linha-error' : 'hr-light'"></StackLayout>-->
<!--                            <Label *ngIf="formUserValidator !== undefined && formUserValidator.password !== undefined" [text]="formUserValidator.password[0]" class="label-error"></Label>-->
<!--                        </StackLayout>-->

                        <StackLayout row="3" colSpan="3" class="input-field">
                            <TextField #name class="input" [isEnabled]="alterStatus"
                                       hint="Nome" [(ngModel)]="user.name"
                                       returnKeyType="done"></TextField>
                            <StackLayout [class]="formUserValidator !== undefined && formUserValidator.name !== undefined ? 'hr-light linha-error' : 'hr-light'"></StackLayout>
                            <Label *ngIf="formUserValidator !== undefined && formUserValidator.name !== undefined" [text]="formUserValidator.name[0]" class="label-error"></Label>
                        </StackLayout>


                        <StackLayout row="4" class="input-field">
                            <InputMask #cpf class="input"
                                       [isEnabled]="alterStatus"
                                       (extractedValueChange)=onExtracaoValorAlterado($event)
                                       [(ngModel)]="user.cpf"
                                       mask="[000].[000].[000]-[00]"
                                       keyboardType="phone"
                                       returnKeyType="next"></InputMask>

<!--                            <TextField class="input"-->
<!--                                       isEnabled="true"-->
<!--                                       [(ngModel)]="user.cpf"-->
<!--                            ></TextField>-->
                            <StackLayout [class]="formUserValidator !== undefined && formUserValidator.cpf !== undefined ? 'hr-light linha-error' : 'hr-light'"></StackLayout>
                            <Label *ngIf="formUserValidator !== undefined && formUserValidator.cpf !== undefined" [text]="formUserValidator.cpf[0]" class="label-error"></Label>
                        </StackLayout>

                        <StackLayout row="5" class="input-field">
                            <InputMask #data_nascimento mask="[00]{/}[00]{/}[0000]"
                                       keyboardType="datetime"
                                       hint="Data de Nascimento"
                                       [(ngModel)]="user.data_nascimento"
                                       (extractedValueChange)=onExtracaoValorDN($event)
                                       class="input" [isEnabled]="alterStatus"></InputMask>
<!--                            <TextField class="input"-->
<!--                                       isEnabled="true"-->
<!--                                      [(ngModel)]="user.data_nascimento"-->
<!--                            ></TextField>-->
                            <StackLayout [class]="formUserValidator !== undefined && formUserValidator.data_nascimento !== undefined ? 'hr-light linha-error' : 'hr-light'"></StackLayout>
                            <Label *ngIf="formUserValidator !== undefined && formUserValidator.data_nascimento !== undefined" [text]="formUserValidator.data_nascimento[0]" class="label-error"></Label>
                        </StackLayout>

                        <StackLayout row="6" class="input-field">
                            <GridLayout rows="auto" columns="auto,*">
                                <Label class="label-sexo" row="0" col="0" [text]="user.sexo"></Label>
                                <Switch class="m-l-28" row="0" col="1" [checked]="checkedSwitch" (checkedChange)="onChangeSexo($event)" [isEnabled]="alterStatus"></Switch>
                            </GridLayout>
                            <StackLayout [class]="formUserValidator !== undefined && formUserValidator.sexo !== undefined ? 'hr-light linha-error' : 'hr-light'"></StackLayout>
                            <Label *ngIf="formUserValidator !== undefined && formUserValidator.sexo !== undefined" [text]="formUserValidator.sexo[0]" class="label-error"></Label>
                        </StackLayout>
                        <ActivityIndicator class="activity-indicator" rowSpan="8" [busy]="processing"></ActivityIndicator>
                        <StackLayout row="7" class="input-field">
                            <TextField keyboardType="number" class="input" [isEnabled]="alterStatus"
                                       hint="Cartão SUS" [(ngModel)]="user.cartao_sus"
                                       returnKeyType="next"></TextField>
                            <StackLayout [class]="formUserValidator !== undefined && formUserValidator.cartao_sus !== undefined ? 'hr-light linha-error' : 'hr-light'"></StackLayout>
                            <Label *ngIf="formUserValidator !== undefined && formUserValidator.cartao_sus !== undefined" [text]="formUserValidator.cartao_sus[0]" class="label-error"></Label>
                        </StackLayout>
                        <StackLayout row="8" class="input-field m-t-90 btn-sair">
                            <Label class="text-btn-sair" text="Sair" (tap)="logout()"></Label>
                        </StackLayout>
                        <Label row="9" class="divider" text=" "></Label>
                        <StackLayout row="10" class="input-field m-t-90 btn-sair">
                            <Label class="text-btn-sair" text="Desativar Conta" (tap)="delete()" ></Label>
                        </StackLayout>
                    </GridLayout>
                </GridLayout>
            </ScrollView>
        </PreviousNextView>
    </StackLayout>
</FlexboxLayout>
